{"ast":null,"code":"import _slicedToArray from\"/home/missy/full_stack_open_course/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Filter from'./components/Filter';import PersonForm from'./components/PersonForm';import Persons from'./components/Persons';import Notification from'./components/Notification';import phonebookService from'./services/phonebook.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var safelyRemoveAtIndex=function safelyRemoveAtIndex(persons,removeAt){return persons.slice(0,removeAt).concat(persons.slice(removeAt+1));};var safelyAddAtIndex=function safelyAddAtIndex(persons,newPerson,insertAt){return persons.slice(0,insertAt).concat(newPerson).concat(persons.slice(insertAt));};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(persons),_useState8=_slicedToArray(_useState7,2),personsToDisplay=_useState8[0],setPersonsToDisplay=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),notificationMessage=_useState10[0],setNotificationMessage=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),successStatus=_useState12[0],setSuccessStatus=_useState12[1];useEffect(function(){phonebookService.getPersons().then(function(initialPersons){setPersons(initialPersons);setPersonsToDisplay(initialPersons);});},[]);var handleNewName=function handleNewName(event){setNewName(event.target.value);};var handleNewNumber=function handleNewNumber(event){setNewNumber(event.target.value);};var addPerson=function addPerson(event){event.preventDefault();var newPerson={name:newName,number:newNumber};var inPhonebook=persons.find(function(person){return person.name===newName;});if(inPhonebook){if(window.confirm(\"\".concat(newName,\" is already added to the phonebook. Replace the old number with a new one?\"))){phonebookService.updatePerson(inPhonebook.id,newPerson).then(function(updatedPerson){var replaceAt=persons.findIndex(function(person){return person.id===inPhonebook.id;});var removed=safelyRemoveAtIndex(persons,replaceAt);var newPersons=safelyAddAtIndex(removed,updatedPerson,replaceAt);setPersons(newPersons);setPersonsToDisplay(newPersons);setNotificationMessage(\"\".concat(newName,\" was updated.\"));setTimeout(function(){return setNotificationMessage(null);},3000);}).catch(function(error){setSuccessStatus(false);setNotificationMessage(error.response.data.error);setTimeout(function(){setSuccessStatus(true);setNotificationMessage(null);},3000);});}}else{phonebookService.addPerson(newPerson).then(function(addedPerson){var newPersons=persons.concat(addedPerson);setPersons(newPersons);setPersonsToDisplay(newPersons);setNotificationMessage(\"\".concat(newName,\" was added.\"));setTimeout(function(){return setNotificationMessage(null);},3000);}).catch(function(error){setSuccessStatus(false);setNotificationMessage(error.response.data.error);setTimeout(function(){setSuccessStatus(true);setNotificationMessage(null);},3000);});}};var deletePerson=function deletePerson(id){var personToDelete=persons.find(function(person){return person.id===id;});if(window.confirm(\"Delete \".concat(personToDelete.name,\"?\"))){phonebookService.deletePerson(id).then(function(){var deleteAt=persons.findIndex(function(person){return person.id===id;});var newPersons=safelyRemoveAtIndex(persons,deleteAt);setPersons(newPersons);setPersonsToDisplay(newPersons);});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:notificationMessage,successStatus:successStatus}),/*#__PURE__*/_jsx(Filter,{persons:persons,setPersonsToDisplay:setPersonsToDisplay}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add new contact\"}),/*#__PURE__*/_jsx(PersonForm,{newName:newName,newNumber:newNumber,handleNewName:handleNewName,handleNewNumber:handleNewNumber,onSubmit:addPerson}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{personsToDisplay:personsToDisplay,deleteHandler:deletePerson})]});};export default App;","map":{"version":3,"sources":["/home/missy/full_stack_open_course/part2/phonebook/src/App.js"],"names":["useState","useEffect","Filter","PersonForm","Persons","Notification","phonebookService","safelyRemoveAtIndex","persons","removeAt","slice","concat","safelyAddAtIndex","newPerson","insertAt","App","setPersons","newName","setNewName","newNumber","setNewNumber","personsToDisplay","setPersonsToDisplay","notificationMessage","setNotificationMessage","successStatus","setSuccessStatus","getPersons","then","initialPersons","handleNewName","event","target","value","handleNewNumber","addPerson","preventDefault","name","number","inPhonebook","find","person","window","confirm","updatePerson","id","updatedPerson","replaceAt","findIndex","removed","newPersons","setTimeout","catch","error","response","data","addedPerson","deletePerson","personToDelete","deleteAt"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\n\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification'\n\nimport phonebookService from './services/phonebook.js';\n\nconst safelyRemoveAtIndex = (persons, removeAt) => (\n  persons\n  .slice(0, removeAt)\n  .concat(persons\n    .slice(removeAt + 1))\n);\n\nconst safelyAddAtIndex = (persons, newPerson, insertAt) => (\n  persons\n  .slice(0, insertAt)\n  .concat(newPerson)\n  .concat(persons\n    .slice(insertAt))\n);\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [personsToDisplay, setPersonsToDisplay] = useState(persons);\n  const [notificationMessage, setNotificationMessage] = useState(null);\n  const [successStatus, setSuccessStatus] = useState(true);\n\n  useEffect(() => {\n    phonebookService.getPersons().then(initialPersons => {\n      setPersons(initialPersons);\n      setPersonsToDisplay(initialPersons);\n    });\n  }, []);\n\n  const handleNewName = event => {\n    setNewName(event.target.value);\n  }\n\n  const handleNewNumber = event => {\n    setNewNumber(event.target.value);\n  }\n\n  const addPerson = event => {\n    event.preventDefault();\n    const newPerson = { name: newName, number: newNumber };\n    const inPhonebook = persons.find(person => person.name === newName);\n\n    if (inPhonebook) {\n      if (window.confirm(`${newName} is already added to the phonebook. Replace the old number with a new one?`)) {\n        phonebookService.updatePerson(\n          inPhonebook.id, \n          newPerson\n        ).then(updatedPerson => {\n          const replaceAt = persons.findIndex(person => (\n            person.id === inPhonebook.id\n          ));\n  \n          const removed = safelyRemoveAtIndex(persons, replaceAt);\n          const newPersons = safelyAddAtIndex(\n            removed,\n            updatedPerson,\n            replaceAt\n          );\n  \n          setPersons(newPersons);\n          setPersonsToDisplay(newPersons);\n\n          setNotificationMessage(`${newName} was updated.`);\n          setTimeout(() => setNotificationMessage(null), 3000);\n        }).catch(error => {\n          setSuccessStatus(false);\n          setNotificationMessage(error.response.data.error);\n\n          setTimeout(() => {\n            setSuccessStatus(true);\n            setNotificationMessage(null);\n          }, 3000);\n        });\n      }\n    } else { \n      phonebookService.addPerson(newPerson)\n        .then(addedPerson => {\n          const newPersons = persons.concat(addedPerson);\n          setPersons(newPersons);\n          setPersonsToDisplay(newPersons);\n\n          setNotificationMessage(`${newName} was added.`);\n          setTimeout(() => setNotificationMessage(null), 3000);\n        })\n        .catch(error => {\n          setSuccessStatus(false);\n          setNotificationMessage(error.response.data.error);\n          \n          setTimeout(() => {\n            setSuccessStatus(true);\n            setNotificationMessage(null);\n          }, 3000);\n        });\n    }\n  }\n\n  const deletePerson = id => {\n    const personToDelete = persons.find(person => person.id === id);\n\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\n      phonebookService.deletePerson(id)\n      .then(() => {\n        const deleteAt = persons.findIndex(person => person.id === id);\n        const newPersons = safelyRemoveAtIndex(persons, deleteAt);\n  \n        setPersons(newPersons);\n        setPersonsToDisplay(newPersons);\n      });\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={notificationMessage} successStatus={successStatus} />\n      <Filter persons={persons} setPersonsToDisplay={setPersonsToDisplay} />\n      <h2>Add new contact</h2>\n      <PersonForm \n        newName={newName}\n        newNumber={newNumber}\n        handleNewName={handleNewName}\n        handleNewNumber={handleNewNumber}\n        onSubmit={addPerson}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        personsToDisplay={personsToDisplay}\n        deleteHandler={deletePerson}\n      />\n    </div>\n  )\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}